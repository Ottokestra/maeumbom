# 신조어 퀴즈 윤리성 필터링 가이드

## 개요

신조어 퀴즈 서비스는 5060 여성 유저를 대상으로 하므로, 윤리적이고 건전한 단어만 사용해야 합니다. 이 문서는 윤리성 필터링 규칙과 정리 방법을 설명합니다.

## 윤리성 필터링 규칙

### 1. 제외 대상 단어

다음과 같은 단어는 절대 사용하지 않습니다:

#### 1.1 초성 줄임말
- **예시**: ㅇㅋ, ㅇㅈ, ㅈㄱㄴ, ㄱㅅ, ㅅㄱ, ㅎㅇ, ㅂㅂ, ㅇㄷ, ㄴㄴ, ㅇㅇ 등
- **이유**: 의미가 모호하고 교육적 가치가 낮음
- **패턴**: 한글 자음/모음만으로 이루어진 2-4자 단어

#### 1.2 특정 단체/커뮤니티에서 유래한 단어
- **예시**: 웅앵웅 (특정 단체에서 유래)
- **이유**: 특정 커뮤니티와의 연관성으로 인한 부적절함
- **판단 기준**: 
  - 특정 안 좋은 단체나 커뮤니티에서 유래한 단어
  - 게임에서 나온 단어라도 윤리적으로 문제가 있는 단어

#### 1.3 폭력적/차별적/혐오 표현
- **이유**: 5060 세대에게 부적절하고 교육적 가치가 없음
- **판단 기준**:
  - 폭력적 의미를 담은 단어
  - 차별적 의미를 담은 단어
  - 혐오 표현을 담은 단어

#### 1.4 불법 활동 미화 단어
- **이유**: 불법 활동을 미화하거나 장려하는 단어는 사용 불가
- **판단 기준**:
  - 마약 관련 단어
  - 도박 관련 단어
  - 성적 비하 관련 단어
  - 기타 불법 활동을 미화하는 단어

#### 1.5 교육적 가치가 없는 단어
- **이유**: 단순히 충격적이거나 교육적 가치가 없는 단어는 제외
- **판단 기준**:
  - 5060 세대에게 부적절하거나 불편할 수 있는 단어
  - 긍정적이고 건전한 소통에 도움이 되지 않는 단어

### 2. 허용 기준

다음 조건을 모두 만족하는 단어만 사용합니다:

1. ✅ **교육적 가치**: 5060 세대가 배우면 자녀와의 소통에 도움이 되는 단어
2. ✅ **명확성**: 의미가 명확하고 모호하지 않은 단어
3. ✅ **실용성**: 실제로 자주 사용되는 단어
4. ✅ **흥미**: 재미있고 배우고 싶은 단어
5. ✅ **유래**: 단어의 유래나 배경 스토리가 있는 단어
6. ✅ **윤리성**: 긍정적이고 건전한 소통에 도움이 되는 단어

## 구현 방법

### 1. 프롬프트 레벨 필터링

`backend/app/slang_quiz/service.py`의 `generate_quiz_with_openai` 함수에서 프롬프트에 윤리성 필터링 규칙이 포함되어 있습니다:

```python
[윤리성 필터링 규칙 - 절대 준수]
- 특정 안 좋은 단체나 커뮤니티에서 유래한 단어는 절대 사용하지 마세요
- 게임에서 나온 단어라도 윤리적으로 문제가 있는 단어는 제외하세요
- 폭력적, 차별적, 혐오 표현을 담은 단어는 사용하지 마세요
- 불법 활동이나 부정적 행위를 미화하는 단어는 사용하지 마세요
- 마약, 도박, 성적 비하 등 부적절한 내용과 관련된 단어는 제외하세요
- 교육적 가치가 없고 단순히 충격적인 단어는 피하세요
- 5060 세대에게 부적절하거나 불편할 수 있는 단어는 제외하세요
- 긍정적이고 건전한 소통에 도움이 되는 단어만 선택하세요
```

### 2. 체크리스트

문제 생성 시 다음 체크리스트를 확인합니다:

1. ✅ 초성만 있는 줄임말이 아닌가?
2. ✅ 윤리적으로 문제가 없는가?
3. ✅ 의미가 명확한가?
4. ✅ 교육적 가치가 있는가?
5. ✅ 긍정적이고 건전한 소통에 도움이 되는가?

## 정리 방법

### 1. 자동 정리 스크립트

윤리성 필터에 걸리는 문제를 자동으로 찾아서 삭제하는 스크립트가 있습니다:

```bash
cd backend
python -m app.slang_quiz.scripts.cleanup_unethical_questions
```

**기능**:
- JSON 파일에서 초성 줄임말 찾기
- 블랙리스트 단어 찾기
- 찾은 문제들을 JSON 파일에서 삭제
- DB에서도 삭제 (SQLAlchemy 설치 시)

**블랙리스트 단어**:
- `backend/app/slang_quiz/scripts/cleanup_unethical_questions.py`의 `BLACKLIST_WORDS`에 정의되어 있습니다.
- 새로운 윤리성 문제가 발견되면 여기에 추가하세요.

### 2. 수동 정리

#### 2.1 JSON 파일에서 삭제
- `backend/app/slang_quiz/data/` 폴더에서 문제가 되는 JSON 파일을 직접 삭제

#### 2.2 DB에서 삭제
- SQL 쿼리로 삭제:
```sql
UPDATE TB_SLANG_QUIZ_QUESTIONS
SET IS_DELETED = True,
    UPDATED_AT = CURRENT_TIMESTAMP
WHERE WORD IN ('단어1', '단어2', ...)
  AND IS_DELETED = False;
```

- Python 스크립트로 삭제:
```bash
cd backend
python -m app.slang_quiz.scripts.cleanup_db_unethical_questions
```

## 블랙리스트 관리

### 현재 블랙리스트 단어

`backend/app/slang_quiz/scripts/cleanup_unethical_questions.py`에 정의된 블랙리스트:

```python
BLACKLIST_WORDS = {
    "웅앵웅",  # 특정 단체에서 유래
    # 추가로 발견되는 단어들을 여기에 추가
}
```

### 블랙리스트 추가 방법

1. 문제가 되는 단어를 발견하면 `BLACKLIST_WORDS`에 추가
2. 정리 스크립트를 실행하여 자동으로 삭제
3. 향후 생성 시 자동으로 제외됨

## 주의사항

1. **신중한 판단**: 단어가 윤리성 필터에 걸리는지 신중하게 판단해야 합니다.
2. **컨텍스트 고려**: 같은 단어라도 사용 맥락에 따라 윤리적일 수 있습니다.
3. **지속적 모니터링**: 새로운 문제가 발견되면 블랙리스트에 추가하고 정리해야 합니다.
4. **문서화**: 블랙리스트에 추가한 이유를 주석으로 명시하세요.

## 관련 파일

- **프롬프트**: `backend/app/slang_quiz/service.py` (윤리성 필터링 규칙)
- **정리 스크립트**: `backend/app/slang_quiz/scripts/cleanup_unethical_questions.py`
- **DB 삭제 스크립트**: `backend/app/slang_quiz/scripts/cleanup_db_unethical_questions.py`
- **블랙리스트**: `backend/app/slang_quiz/scripts/cleanup_unethical_questions.py`의 `BLACKLIST_WORDS`

## 업데이트 이력

- 2024-XX-XX: 초기 문서 작성
- 2024-XX-XX: "웅앵웅" 블랙리스트 추가
- 2024-XX-XX: 초성 줄임말 자동 감지 기능 추가

